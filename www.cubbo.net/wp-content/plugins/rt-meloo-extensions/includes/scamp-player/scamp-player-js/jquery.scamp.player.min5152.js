/*!
 * Scamp Player ver. 3.2.2

 * jQuery SoundManager 2 Plugin
 *
 * Copyright (c) 2018 Mariusz Rek
 * Rascals Themes 2018
 *
 */
(function(a){a.ScampPlayer=function(c,d){var o={sm_options:{},queue:null,volume_user:80,volume:100,shoutcast_interval:20000,shoutcast_timer:false,shoutcast:true,is_shoutcast:false,autoplay:false,loop:false,random:false,titlebar:false,no_track_image:null,delay:5,path:null,load_first_track:true,client_id:"23f5c38e0aa354cdd0e1a6b4286f6aa4",debug:false,local_storage:false,link_filter:".track-title",labels:{play:"Play",cover:"Cover",title:"Title/Artist",buy:"Buy/Download",remove:"Remove",empty_queue:"Empty Queue"},obj:{status:"ready",action:"",tracks:[],tracks_size:0,track_nr:-1},storage_play:false,v:{render_frame_eq:null,status:null,audio:null,actx:null,comp:null,analyser:null,audioSrc:null,frequencyData:null},play_from_list:false,mobile:false,status:null,soundcloud:false,replace_sc_covers:true,track_id:0,new_tracks_nr:0,new_tracks_notifications:false,sm_init:false,rebuild:false,sound:null,track:null,searching:false,tracklist_length:null,document_title:document.title,track_html:null,tracklist:null,is_mouse:false,direction:"next",onReady:function(){},onTrackEnd:function(){},onTrackStart:function(){},audioAnalyser:function(){},};
var e=this;e.settings={};var s=function(){e.settings=a.extend({},o,d);e.el=c;if(window.soundManager){sm_obj={onready:function(){if(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Windows Phone|Opera Mini/i.test(navigator.userAgent)){e.settings.mobile=true;
}var y=false;var C=0;function G(J){C=0;y=true;}function B(J){y=false;C=0;}function z(J){if(!y){C++;if(C>5){window.removeEventListener("mousemove",z,false);
e.settings.is_mouse=true;}}else{C=0;}}window.addEventListener("mousemove",z,false);window.addEventListener("mousedown",G,false);window.addEventListener("mouseup",B,false);
if(e.settings.mobile){e.settings.autoplay=false;}if(e.settings.mobile&&e.settings.path!=null){function H(){a("a").off("click",H);var J=soundManager.createSound({id:"init_mobile_track",url:e.settings.path+"/blank.mp3",autoload:false,volume:100,onload:function(){},onplay:function(){},onpause:function(){},onresume:function(){},onstop:function(){},onfinish:function(){},whileloading:function(){},whileplaying:function(){}});
J.play();}a("a").on("click",H);}if(typeof SC!=="undefined"){SC.initialize({client_id:e.settings.client_id});SC.whenStreamingReady(function(){e.settings.soundcloud=true;
});}e.settings.sm_init=true;var D=null;if(a("> a",e.el).length){D=new Array();var E=a("> a",e.el).length;a("> a",e.el).each(function(){D.push(a(this));
a(this).remove();});}e.el.append('<div id="sp-toggle-wrap"><div id="sp-toggle"></div></div><div class="sp-main-container"><div class="sp-queue-container"><div class="sp-queue"><div id="sp-scroller"><table id="sp-queue-scroll"><thead><tr><th class="sp-list-controls" colspan="5"><span id="sp-empty-queue">'+e.settings.labels.empty_queue+"</span></th></tr><tr><th>"+e.settings.labels.play+"</th><th>"+e.settings.labels.cover+'</th><th class="sp-th-title">'+e.settings.labels.title+'</th><th class="sp-th-cart sp-small-screen">'+e.settings.labels.buy+'</th><th class="sp-th-remove sp-small-screen sp-medium-screen">'+e.settings.labels.remove+'</th></tr></thead><tbody></tbody></table></div></div></div><div class="sp-player-wrap"><div class="sp-progress-container"><div class="sp-progress"><span class="sp-loading"></span><span class="sp-position"></span></div></div><div class="sp-player-container"><div class="sp-buttons-container"><div class="sp-controls"><a class="sp-prev-button"></a><a class="sp-play-button"></a><a class="sp-next-button"></a><div class="sp-volume-container"><div class="sp-volume-bar-container"><div class="sp-volume-slider"><span class="sp-volume-position"></span></div></div></div></div><div class="sp-queue-button-container"><span class="sp-badge"></span><a class="sp-queue-button"></a></div></div><div class="sp-track-container"><a class="sp-track-cover"><img src="'+e.settings.no_track_image+'" alt="Track cover" class="sp-track-artwork"/></a><div class="sp-track-details"><a class="sp-track-title"></a><a class="sp-track-artist"></a><div class="sp-marquee-container"><span class="sp-marquee"></span></div></div></div><div class="sp-time"><span class="sp-time-elapsed"></span><span class="sp-time-total"></span></div></div></div></div>');
e.settings.track_html=['<tr class="sp-track">','<td><a class="sp-track-control sp-icon" href="#"></a></td>','<td class="sp-cover-artwork"><img src="" alt="Cover" /></td>','<td class="sp-title"><a class="sp-title-button"></a><a class="sp-artist-button"></a></td>','<td class="sp-cart sp-small-screen"><a class="sp-icon sp-cart-button"></a></td>','<td class="sp-remove sp-small-screen sp-medium-screen"><span class="sp-icon sp-remove-button"></span></td>'].join("\n");
e.settings.tracklist=a("#sp-queue-scroll");a(".sp-volume-position").css("width",e.settings.volume+"%");_set_vol_class(e.settings.volume);e.settings.volume_user=e.settings.volume;
if(!e.settings.mobile&&a(".sp-volume-button.sp-show-volume").length){var I=function(J){a(".sp-volume-bar-container").fadeToggle(200,"swing");e.el.removeClass("sp-show-list");
a("body").removeClass("sp-show-list");J.preventDefault();J.stopPropagation();};a(".sp-volume-button").on("click",I);a(document).on("click",function(K){var J=a(".sp-volume-bar-container");
if(!J.is(K.target)&&J.has(K.target).length===0){a(".sp-volume-button").off("click");a(".sp-volume-bar-container").fadeOut(200,"swing",function(){a(".sp-volume-button").on("click",I);
});}});}if(typeof(Storage)!=="undefined"&&sessionStorage.getItem("scamp_player_list")!==null&&sessionStorage.getItem("scamp_player_list")!==""){e.settings.local_storage=true;
var F=sessionStorage.getItem("scamp_player_list"),A=0;a("#sp-queue-scroll tbody").html(F);a("#sp-queue-scroll tbody .sp-track-control").on("click",k);a("#sp-queue-scroll tbody .sp-remove-button").on("click",q);
e.settings.tracklist_length=a("#sp-queue-scroll tbody .sp-track").length-1;a("#sp-queue-scroll .sp-track").removeClass("loading");if(!e.settings.mobile){if(a("#sp-queue-scroll .sp-track.playing").length){e.settings.track=a("#sp-queue-scroll .sp-track.playing");
if(sessionStorage.getItem("scamp_player_pos")!==null){A=sessionStorage.getItem("scamp_player_pos");}if(sessionStorage.getItem("scamp_player_shoutcast")==true){h("pause",0);
}else{h("pause",A);}e.settings.storage_play=true;}else{if(a("#sp-queue-scroll .sp-track.paused").length){e.settings.track=a("#sp-queue-scroll .sp-track.paused");
if(sessionStorage.getItem("scamp_player_pos")!==null){A=sessionStorage.getItem("scamp_player_pos");}h("pause",A);e.settings.storage_play=false;}else{e.settings.track=a("#sp-queue-scroll .sp-track:eq(0)");
h("pause",0);e.settings.storage_play=false;}}}else{if(a("#sp-queue-scroll .sp-track.playing").length){e.settings.track=a("#sp-queue-scroll .sp-track.playing");
}else{if(a("#sp-queue-scroll .sp-track.paused").length){e.settings.track=a("#sp-queue-scroll .sp-track.paused");}else{e.settings.track=a("#sp-queue-scroll .sp-track:eq(0)");
}}if(sessionStorage.getItem("scamp_player_pos")!==null){A=sessionStorage.getItem("scamp_player_pos");}else{A=0;}h("pause",A);e.settings.storage_play=false;
}}else{if(D!==null){e.settings.obj={status:"working",action:"add_tracks",tracks:D,tracks_size:E,track_nr:-1,};v();}}a(".sp-play-button, .sp-next-button, .sp-prev-button").on("touchstart click",function(){e.settings.play_from_list=false;
});a(".sp-play-button").on("touchstart click",_play);a(".sp-next-button").on("touchstart click",g);a(".sp-prev-button").on("touchstart click",f);a(".sp-queue-button").on("touchstart click",function(J){e.el.toggleClass("sp-show-list");
a("body").toggleClass("sp-show-list");J.preventDefault();});a("#sp-toggle").on("touchstart click",function(J){e.el.toggleClass("sp-show-player");J.preventDefault();
});a("#sp-empty-queue").on("touchstart click",function(J){e.settings.play_from_list=false;if(a("#sp-queue-scroll .sp-track.playing").length||a("#sp-queue-scroll .sp-track.paused").length){_destruct_sound();
clearInterval(e.settings.shoutcast_timer);}a("#sp-queue-scroll .sp-track").not(".playing").remove();e.settings.track=null;e.settings.tracklist_length=null;
r(0);a(".sp-progress").find(".sp-position").width(0);a(".sp-progress").find(".sp-loading").width(0);a(".sp-content-control.sp-is-active").removeClass("sp-is-active");
if(typeof(Storage)!=="undefined"){sessionStorage.removeItem("scamp_player_list");}J.preventDefault();});m();e.update_events("body");e.el.addClass("sp-show");
e.settings.onReady.call(undefined);return;},ontimeout:function(){},defaultOptions:{volume:e.settings.volume,usePeakData:false}};a.extend(e.settings.sm_options,sm_obj);
soundManager.setup(e.settings.sm_options);}};_has_touch=function(y){return(("ontouchstart" in window)||(navigator.maxTouchPoints>0)||(navigator.msMaxTouchPoints>0));
};_remove_tracks=function(y){a("#"+y).find(".track").each(function(){var A=a(this).attr("href"),B=a('#sp-queue-scroll .sp-track-control[href="'+A+'"]'),z=a('#sp-queue-scroll .sp-track[data-sc="'+A+'"]');
if(B.length){B.parents(".sp-track").remove();}if(z){z.remove();}});};_check_tracks=function(A){if(a('#sp-queue-scroll .fromlist[data-fromlist="'+A+'"]').length<=0){return false;
}var z=a("#"+A).find(".sp-track-item .track").length,y=a('#sp-queue-scroll .fromlist[data-fromlist="'+A+'"]').length;if(z!=y){return false;}return true;
};_get_track_index=function(){var y,z=e.settings.track.find(".sp-track-control").attr("href");track_from_queue=a("#sp-queue-scroll").find('.sp-track-control[href="'+z+'"]');
y=track_from_queue.parents('tr[class*="sp-track"]').index();return y;};function x(z,y){if(y==""){y="80";}a.SHOUTcast({host:z,port:y,}).stats(function(){if(this.onAir()){a("#scamp_player .sp-track-container .sp-track-title").text(this.get("songtitle"));
}else{a("#scamp_player .sp-track-container .sp-track-title").text(this.get("status"));}});}function n(y){if(e.settings.sound&&e.settings.mobile==false){e.settings.v.comp=new RegExp(location.host);
e.settings.v.audio=e.settings.sound._a;if(!e.settings.v.comp.test(e.settings.v.audio.src)){return;}if(y=="pause"||y=="stop"){if(e.settings.v.actx.state==="running"){e.settings.v.actx.suspend();
e.settings.audioAnalyser.call(this,{v:e.settings.v,status:"stop"});return;}}if(y=="play"){if(e.settings.v.actx.state==="suspended"){e.settings.v.actx.resume();
e.settings.audioAnalyser.call(this,{v:e.settings.v,status:"play"});return;}}if(y=="update"){if(e.settings.v.actx.state==="running"){e.settings.audioAnalyser.call(this,{v:e.settings.v,status:"update"});
return;}}if(y=="init"){e.settings.v.actx=new (window.AudioContext||window.webkitAudioContext)();e.settings.v.analyser=e.settings.v.actx.createAnalyser();
e.settings.v.audio.controls=true;e.settings.v.audio.crossOrigin="anonymous";e.settings.v.audioSrc=e.settings.v.actx.createMediaElementSource(e.settings.v.audio);
e.settings.v.audioSrc.connect(e.settings.v.analyser);e.settings.v.analyser.connect(e.settings.v.actx.destination);e.settings.v.frequencyData=new Uint8Array(e.settings.v.analyser.frequencyBinCount);
e.settings.audioAnalyser.call(this,{v:e.settings.v,status:"init"});}}}var h=function(B,A){if(typeof(A)==="undefined"){A=0;}if(typeof(B)==="undefined"){B="play";
}var z=e.settings.track.find(".sp-track-control").attr("href"),y=document.createElement("a");y.href=z;clearInterval(e.settings.shoutcast_timer);if(z.indexOf("?sp_radio")>=0){if(typeof(Storage)!=="undefined"){sessionStorage.setItem("scamp_player_shoutcast",true);
}a("#scamp_player").addClass("is-shoutcast");e.settings.is_shoutcast=true;if(e.settings.shoutcast){if(z.indexOf("listen.radionomy")>=0){}else{if(z.indexOf("&onair=0")>=0){}else{e.settings.shoutcast_timer=setInterval(function(){x(y.hostname,y.port);
},e.settings.shoutcast_interval);x(y.hostname,y.port);}}}}else{a("#scamp_player").removeClass("is-shoutcast");if(typeof(Storage)!=="undefined"){sessionStorage.setItem("scamp_player_shoutcast",false);
}e.settings.is_shoutcast=false;}e.settings.sound=soundManager.createSound({id:"scamp_sound",url:z,from:A,stream:true,autoload:false,volume:e.settings.volume,onerror:function(D,C){console.log(this.id+" failed?",D,C);
e.settings.status="error";e.settings.track.addClass("sp-error");e.update_content();if(a("#sp-queue-scroll .sp-track:not(.sp-error)").length){if(e.settings.direction=="prev"){f();
}else{g();}}else{l();}},onload:function(){e.settings.status="play";n("init");},onplay:function(){var C={title:e.settings.track.find(".sp-title-button").text(),url:e.settings.track.find(".sp-track-control").attr("href"),artist:e.settings.track.find(".sp-artist-button").text(),track_index:_get_track_index(),tracklist_length:e.settings.tracklist_length};
e.settings.onTrackStart.call(this,C);if(e.settings.sound.readyState==3){e.settings.status="play";}else{if(e.settings.is_shoutcast){e.settings.status="play";
}else{e.settings.track.addClass("loading");e.el.addClass("loading");e.settings.status="loading";}}a("#scamp_player").removeClass("sp-muted");if(e.settings.sound&&e.settings.volume==0){e.settings.volume=e.settings.volume_user;
e.settings.sound.setVolume(e.settings.volume);a(".sp-volume-position").css("width",e.settings.volume+"%");}e.update_content();a("#sp-queue-scroll tbody .paused").removeClass("paused");
a(".sp-volume-position").css("width",e.settings.volume+"%");e.settings.sound.setVolume(e.settings.volume);},onpause:function(){e.settings.status="pause";
n("pause");e.update_content();if(!e.settings.searching){e.settings.track.removeClass("playing").addClass("paused");e.el.removeClass("playing").addClass("paused");
}},onresume:function(){e.settings.status="play";n("play");e.update_content();e.settings.track.removeClass("paused").addClass("playing");e.el.removeClass("paused").addClass("playing");
},onstop:function(){e.settings.sound.setPosition(0);clearInterval(e.settings.shoutcast_timer);e.settings.status="stop";n("stop");e.update_content();e.settings.track.removeClass("playing loading paused");
e.el.removeClass("playing loading paused");a(".sp-time-elapsed, .sp-time-total").empty();a(".sp-progress").find(".sp-position").width(0);},onfinish:function(){clearInterval(e.settings.shoutcast_timer);
var C={title:e.settings.track.find(".sp-title-button").text(),url:e.settings.track.find(".sp-track-control").attr("href"),artist:e.settings.track.find(".sp-artist-button").text(),track_index:_get_track_index(),tracklist_length:e.settings.tracklist_length};
e.settings.onTrackEnd.call(this,C);a(".sp-time-elapsed, .sp-time-total").empty();a(".sp-progress").find(".sp-position").width(0);e.settings.status="stop";
n("stop");e.update_content();e.settings.track.removeClass("loading paused");e.el.removeClass("loading paused");if(e.settings.random){u();return false;}e.settings.track.removeClass("playing");
if(e.settings.loop){g();}else{var D=_get_track_index();if(D!=e.settings.tracklist_length){g();}else{e.settings.track.removeClass("playing");e.el.removeClass("playing");
}}},whileloading:function(){a(".sp-progress").find(".sp-loading").width(e.settings.sound.bytesLoaded/e.settings.sound.bytesTotal*100+"%");},whileplaying:function(){e.settings.track.removeClass("paused loading").addClass("playing");
e.el.removeClass("paused loading").addClass("playing");if(!a("#scamp_player").is(".is_shoutcast, .sp-muted")){e.update_content();}if(typeof(Storage)!=="undefined"){sessionStorage.setItem("scamp_player_pos",e.settings.sound.position);
}a(".sp-progress").find(".sp-position").width(e.settings.sound.position/e.settings.sound.durationEstimate*100+"%");a(".sp-time-elapsed").html(_format_time(e.settings.sound.position));
a(".sp-time-total").html(_format_time(e.settings.sound.durationEstimate));if(!e.settings.is_shoutcast){if(!e.settings.mobile&&(e.settings.sound.position>=e.settings.sound.durationEstimate)){clearInterval(e.settings.shoutcast_timer);
var C={title:e.settings.track.find(".sp-title-button").text(),url:e.settings.track.find(".sp-track-control").attr("href"),artist:e.settings.track.find(".sp-artist-button").text(),track_index:_get_track_index(),tracklist_length:e.settings.tracklist_length};
e.settings.onTrackEnd.call(this,C);a(".sp-time-elapsed, .sp-time-total").empty();a(".sp-progress").find(".sp-position").width(0);e.settings.status="stop";
n("stop");e.update_content();e.settings.track.removeClass("loading paused");e.el.removeClass("loading paused");if(e.settings.random){u();return false;}if(e.settings.loop){g();
}else{var D=_get_track_index();if(D!=e.settings.tracklist_length){g();}else{e.settings.track.removeClass("playing");e.el.removeClass("playing");}}}}}});
if((e.settings.load_first_track&&e.settings.local_storage==false)||B==="pause"){e.settings.load_first_track=false;}else{if(B==="play"){e.settings.load_first_track=false;
}e.settings.sound.togglePause();}w();};_pause=function(){if(e.settings.sound){if(e.settings.track.hasClass("playing")){e.settings.sound.pause();}}};_play=function(){if(typeof(event)!=="undefined"){if(a(event.target).hasClass("sp-play-button")||a(event.target).hasClass("sp-track-control")){e.settings.storage_play=false;
}}if(e.settings.tracklist_length==null){return;}if(e.settings.track==null){e.settings.track=a("#sp-queue-scroll tbody tr:eq(0)");}if(e.settings.sound){if(e.settings.is_shoutcast){b();
}else{e.settings.sound.togglePause();}}else{h();}if(e.settings.titlebar){document.title=e.settings.track.find(".sp-title-button").text()+" | "+e.settings.document_title;
}if(typeof(Storage)!=="undefined"){var y=function(){if((e.settings.track!=null)&&(e.settings.track.hasClass("playing")||e.settings.track.hasClass("paused"))){var z=a("#sp-queue-scroll tbody").html();
sessionStorage.setItem("scamp_player_list",z);}else{setTimeout(y,400);}};y();}if(typeof(event)!=="undefined"){event.preventDefault();event.stopPropagation();
event.stopImmediatePropagation();}return false;};var u=function(){if(e.settings.tracklist_length==null||e.settings.tracklist_length<2){e.settings.track=y;
_play();return false;}function z(D,C){return Math.floor(Math.random()*(C-D+1))+D;}var B=_get_track_index(),y=null,A=null;while((A=z(0,e.settings.tracklist_length))==B){}e.settings.track.removeClass("playing");
e.el.removeClass("playing");y=a("#sp-queue-scroll tbody tr:eq("+A+")");_destruct_sound();e.settings.track=y;_play();if(e.settings.sound){e.settings.sound.setPosition(0);
}return true;};var g=function(){e.settings.direction="next";e.settings.storage_play=false;if(e.settings.tracklist_length==null){return;}var A=_get_track_index(),z=A+1,y=null;
if(z>e.settings.tracklist_length){z=0;}_destruct_sound();y=a("#sp-queue-scroll tbody tr:eq("+z+")");e.settings.track=y;_play();if(e.settings.sound){e.settings.sound.setPosition(0);
}return false;};var f=function(){e.settings.direction="prev";e.settings.storage_play=false;if(e.settings.tracklist_length==null){return;}var A=_get_track_index(),z=A-1,y=null;
if(z<0){z=e.settings.tracklist_length;}_destruct_sound();y=a("#sp-queue-scroll tbody tr:eq("+z+")");e.settings.track=y;_play();if(e.settings.sound){e.settings.sound.setPosition(0);
}return false;};var l=function(){e.settings.storage_play=false;if(e.settings.tracklist_length==null){return;}if(e.settings.track==null){e.settings.track=a("#sp-queue-scroll tbody tr:eq(0)");
}if(e.settings.sound){e.settings.sound.stop();}return false;};var b=function(){if(e.settings.sound){var y=e.settings.track.find(".sp-track-control").attr("href"),z=a('a.sp-play-track[href="'+y+'"]');
a("a.sp-play-track").removeClass("sp-play sp-pause sp-stop sp-loading sp-muted");if(e.settings.volume==0){e.settings.volume=e.settings.volume_user;e.settings.sound.setVolume(e.settings.volume);
a(".sp-volume-position").css("width",e.settings.volume+"%");z.addClass("sp-play");a("#scamp_player").removeClass("sp-muted");}else{e.settings.volume_user=e.settings.volume;
e.settings.volume=0;e.settings.sound.setVolume(0);a(".sp-volume-position").css("width","0");z.addClass("sp-pause");a("#scamp_player").addClass("sp-muted");
}}};var w=function(){a(".sp-track-container a",e.el).removeAttr("href").removeAttr("target");a(".sp-track-container .sp-track-title, .sp-track-container .sp-track-artist",e.el).text("");
a(".sp-track-container .sp-track-artwork",e.el).attr("src",e.settings.no_track_image);a(".sp-marquee",e.el).text("");if(e.settings.sound){var E=e.settings.track.find(".sp-cover-artwork img").attr("src"),F=e.settings.track.find(".sp-title-button").text(),A=e.settings.track.find(".sp-artist-button").text(),C=e.settings.track.find(".sp-artist-button").attr("href"),z=e.settings.track.find(".sp-artist-button").attr("target"),y=e.settings.track.find(".sp-title-button").attr("href"),D=e.settings.track.find(".sp-title-button").attr("target");
shop_url=e.settings.track.find(".sp-tl-shop").attr("href"),shop_target=e.settings.track.find(".sp-tl-shop").attr("target");if(A!==""&&C!==""){a(".sp-track-container .sp-track-artist",e.el).attr("href",C);
if(z!==""){z=z;}else{z="_self";}a(".sp-track-container .sp-track-artist",e.el).attr("target",z);}if(y!==""){a(".sp-track-container .sp-track-title",e.el).attr("href",y);
if(D!==""){D=D;}else{D="_self";}a(".sp-track-container .sp-track-title",e.el).attr("target",D);}a(".sp-track-container .sp-track-artwork",e.el).attr("src",E);
a(".sp-track-container .sp-track-title",e.el).text(F);a(".sp-track-container .sp-track-artist",e.el).text(A);var B="<strong>"+F+"</strong>";if(A!==""){B=B+" - "+A;
}a(".sp-marquee",e.el).html(B);}return false;};_destruct_sound=function(){if(e.settings.sound){e.settings.sound.stop();e.settings.sound.setPosition(0);
e.settings.sound.destruct();e.settings.sound=null;w();}};var v=function(){e.settings.obj.track_nr++;if(e.settings.obj.track_nr==0){setTimeout(function(){e.el.addClass("sp-queue-loading");
},500);a(".sp-queue").css("opacity",0);}if(e.settings.obj.track_nr>=e.settings.obj.tracks_size){j();}else{setTimeout(t,e.settings.delay);}};var j=function(){var A=null,z=null,B=null;
if(a("#sp-scroller tr").length>0&&e.settings.rebuild){setTimeout(function(){e.el.removeClass("sp-queue-loading");},500);a(".sp-queue").css("opacity",1);
e.settings.rebuild=false;if(e.settings.new_tracks_notifications){a(".sp-badge",e.el).text("+"+e.settings.new_tracks_nr);if(a(".sp-badge",e.el).text()!="+0"){a(".sp-badge",e.el).addClass("sp-show-badge");
setTimeout(function(){a(".sp-badge",e.el).removeClass("sp-show-badge");},5000);}}e.settings.new_tracks_nr=0;}else{setTimeout(function(){e.el.removeClass("sp-queue-loading");
},500);a(".sp-queue").css("opacity",1);}if(e.settings.track!=null&&e.settings.autoplay){if(e.settings.random){u();}else{_play();}e.settings.autoplay=false;
}else{if(e.settings.track!=null&&e.settings.load_first_track){if(e.settings.random){u();}else{_play();}}}if(e.settings.obj.action=="play_track"||e.settings.obj.action=="play_tracks"){if(e.settings.obj.init_track!=undefined){var y=e.settings.obj.init_track;
A=e.settings.obj.tracks[y].data("status");B=e.settings.obj.tracks[y].attr("href");if(A=="track_ready"||A=="already_onlist"){e.settings.obj.tracks[0]=e.settings.obj.tracks[y];
}}for(var C=0;C<e.settings.obj.tracks_size;C++){A=e.settings.obj.tracks[C].data("status");B=e.settings.obj.tracks[C].attr("href");if(A=="track_ready"||A=="already_onlist"){z=e.settings.track.find(".sp-track-control").attr("href");
if(z!=B){_destruct_sound();var D=a("#sp-queue-scroll").find('.sp-track-control[href="'+B+'"]');e.settings.track=D.parents('tr[class*="sp-track"]');_play();
}else{_play();}break;}}}e.settings.obj.status="ready";};var t=function(){var A=e.settings.obj.track_nr,z=e.settings.obj.tracks[A].attr("href"),y=/http(s?):\/\/soundcloud/;
if(y.test(z)){if(a('.sp-queue .sp-track[data-sc="'+z+'"]').length>0){e.settings.obj.tracks[A].attr("data-status","already_onlist");var B=a('#sp-queue-scroll tbody .sp-track[data-sc="'+z+'"]');
B=B.find(".sp-track-control").attr("href");e.settings.obj.tracks[A].attr("href",B);v();}else{_add_soundcloud();}}else{if(a('.sp-queue .sp-track-control[href="'+z+'"]').length>0){e.settings.obj.tracks[A].attr("data-status","already_onlist");
v();}else{if(z!=""||z!="#"||z!=undefined){e.settings.obj.tracks[A].attr("data-status","file_exists");_create_track();}else{e.settings.obj.tracks[A].attr("data-status","Error404");
e.settings.play_from_list=false;v();}}}};_add_soundcloud=function(){var A=e.settings.obj.track_nr,y=e.settings.obj.tracks[A].attr("href");if(e.settings.client_id==""){e.settings.obj.tracks[A].attr("data-status","Error404");
v();return false;}else{if(!e.settings.soundcloud){e.settings.obj.tracks[A].attr("data-status","Error404");v();return false;}}if(e.settings.obj.tracks[A].data("sc_stream")!=undefined){var z={stream_url:null,artwork_url:null,title:null,permalink_url:null,user:{username:null,permalink_url:null}};
z.stream_url=e.settings.obj.tracks[A].data("sc_stream");z.artwork_url=e.settings.obj.tracks[A].data("sc_art");z.title=e.settings.obj.tracks[A].data("sc_title");
z.user.username=e.settings.obj.tracks[A].data("artist");z.user.permalink=e.settings.obj.tracks[A].data("artist_url");z.permalink=e.settings.obj.tracks[A].data("release_url");
_create_soundcloud(z);return false;}SC.get("/resolve",{url:y},function(B){if(B==undefined||B.errors){e.settings.obj.tracks[A].attr("data-status","Error404");
v();}else{if(B.length!=undefined){B.tracks=B;}else{if(B.kind!=undefined&&B.kind=="user"){SC.get("/users/"+B.id+"/tracks",function(C){C.tracks=C;_process_sc_tracks(C);
});}else{if(B.kind!=undefined&&B.kind=="group"){SC.get("/groups/"+B.id+"/tracks",function(C){C.tracks=C;_process_sc_tracks(C);});}else{if(B.tracks){_process_sc_tracks(B);
}else{_create_soundcloud(B);}}}}}});};_process_sc_tracks=function(B){var E=e.settings.obj.track_nr,y=e.settings.obj.tracks[E].attr("href"),z=E,F=[],A=e.settings.obj.tracks[E].attr("data-artist"),H=e.settings.obj.tracks[E].attr("data-artist_url"),G=e.settings.obj.tracks[E].attr("data-artist_target"),D=e.settings.obj.tracks[E].attr("data-release_url"),C=e.settings.obj.tracks[E].attr("data-release_target");
shop_url=e.settings.obj.tracks[E].attr("data-shop_url"),shop_target=e.settings.obj.tracks[E].attr("data-shop_target"),free_download=e.settings.obj.tracks[E].attr("data-free_download");
e.settings.obj.tracks.splice(E,1);e.settings.obj.tracks_size=e.settings.obj.tracks_size-1;e.settings.obj.track_nr=e.settings.obj.track_nr-1;if(shop_url==undefined||shop_url==""){shop_url="";
}if(shop_target==undefined||shop_target==""){shop_target="";}if(free_download==undefined||free_download==""){free_download="";}a.each(B.tracks,function(N,K){var P,O,J,M,L;
if(A==undefined||A==""){P=K.user.username;}else{P=A;}if(H==undefined||H==""){O=K.user.permalink_url;J="_blank";}else{O=H;if(G==undefined||G==""){J="_blank";
}else{J=G;}}if(D==undefined||D==""){M=K.permalink_url;L="_blank";}else{M=D;if(C==undefined||C==""){L="_blank";}else{L=C;}}var I='<a href="'+K.permalink_url+'" data-cover="" data-sc_list="'+y+'" data-sc_stream="'+K.stream_url+'" data-sc_art="'+K.artwork_url+'" data-sc_title="'+K.title+'" data-artist="'+P+'" data-artist_url="'+O+'" data-artist_target="'+J+'" data-release_url="'+M+'" data-release_target="'+L+'" data-shop_url="'+shop_url+'" data-shop_target="'+shop_target+'" data-free_download="'+free_download+'">'+K.title+"</a>";
F.push(a(I));});_insert_array_at(e.settings.obj.tracks,z,F);e.settings.obj.tracks_size=e.settings.obj.tracks_size+F.length;v();};_insert_array_at=function(A,z,y){Array.prototype.splice.apply(A,[z,0].concat(y));
return A;};_create_soundcloud=function(A){var C=e.settings.obj.track_nr,y=e.settings.obj.tracks[C].attr("href"),G=A.stream_url,z=e.settings.obj.tracks[C].attr("data-artist"),F=e.settings.obj.tracks[C].attr("data-artist_url"),E=e.settings.obj.tracks[C].attr("data-artist_target"),D=e.settings.obj.tracks[C].attr("data-release_url"),B=e.settings.obj.tracks[C].attr("data-release_target");
if(G===undefined){console.log("Soundcloud error: No stream URL!");e.settings.obj.tracks[C].attr("data-status","Error404");v();return false;}(G.indexOf("secret_token")==-1)?G=G+"?":G=G+"&";
G=G+"consumer_key="+e.settings.client_id;if(z==undefined||z==""){z=A.user.username;}if(F==undefined||F==""){F=A.user.permalink_url;}if(E==undefined||E==""){E="_blank";
}if(D==undefined||D==""){D=A.permalink_url;}if(B==undefined||B==""){B="_blank";}if(e.settings.replace_sc_covers==true){if(e.settings.obj.tracks[C].attr("data-cover")==undefined||e.settings.obj.tracks[C].attr("data-cover")==""){e.settings.obj.tracks[C].attr("data-cover",A.artwork_url);
}}else{e.settings.obj.tracks[C].attr("data-cover",A.artwork_url);}e.settings.obj.tracks[C].attr("data-sc",y);e.settings.obj.tracks[C].attr("href",G);e.settings.obj.tracks[C].attr("data-artist",z);
e.settings.obj.tracks[C].attr("data-artist_url",F);e.settings.obj.tracks[C].attr("data-artist_target",E);e.settings.obj.tracks[C].attr("data-release_url",D);
e.settings.obj.tracks[C].attr("data-release_target",B);e.settings.obj.tracks[C].text(A.title);_create_track();};_create_track=function(){e.settings.rebuild=true;
var J=e.settings.obj.track_nr,y=e.settings.obj.tracks[J].attr("href"),I=e.settings.obj.tracks[J].text(),O=e.settings.obj.tracks[J].data("cover"),D=e.settings.obj.tracks[J].data("artist"),M=e.settings.obj.tracks[J].data("artist_url"),L=e.settings.obj.tracks[J].data("artist_target"),K=e.settings.obj.tracks[J].data("release_url"),H=e.settings.obj.tracks[J].data("release_target"),C=e.settings.obj.tracks[J].data("shop_url"),G=e.settings.obj.tracks[J].data("shop_target"),B=e.settings.obj.tracks[J].data("free_download"),F=a(e.settings.track_html),A=null;
if(a('.sp-queue .sp-track-control[href="'+y+'"]',e.el).length){e.settings.obj.tracks[J].attr("data-status","already_onlist");v();return false;}F.find(".sp-track-control").attr("href",y);
if(O==undefined||O==""){O=e.settings.no_track_image;}F.find(".sp-cover-artwork img").attr("src",O);F.find(".sp-title-button").text(I);if(K!=undefined||K!=""){F.find(".sp-title-button").attr("href",K);
if(H!=undefined||H!=""){F.find(".sp-title-button").attr("target",H);}}if(D!=undefined&&D!=""){F.find(".sp-artist-button").text(D);if(M!=undefined||M!=""){F.find(".sp-artist-button").attr("href",M);
if(L!=undefined&&L!=""){F.find(".sp-artist-button").attr("target",L);}}}if(C!=undefined&&C!=""){F.find(".sp-cart-button").attr("href",C);if(G!=undefined&&G!=""){F.find(".sp-cart-button").attr("target",G);
}if(B!=undefined&&B=="yes"){F.find(".sp-cart-button").addClass("sp-download-button");F.find(".sp-cart-button").attr("target",G);F.find(".sp-cart-button").attr("download",C);
}}else{F.find(".sp-cart-button").remove();}if(e.settings.obj.list_id!=undefined){var E=e.settings.obj.list_id;F.attr("data-fromlist",E).addClass("fromlist");
}if(e.settings.obj.tracks[J].data("sc")!=undefined){var z=e.settings.obj.tracks[J].data("sc");F.attr("data-sc",z).addClass("sc-track");}if(e.settings.obj.tracks[J].data("sc_list")!=undefined){var N=e.settings.obj.tracks[J].data("sc_list");
F.attr("data-sc_list",N).addClass("sc-list");}e.settings.tracklist.append(F);A=e.settings.tracklist.find(F);e.settings.track_id++;e.settings.new_tracks_nr++;
e.settings.tracklist_length=a("#sp-queue-scroll tbody .sp-track").length-1;if(e.settings.tracklist_length==0){e.settings.track=A;}e.settings.obj.tracks[J].attr("data-status","track_ready");
A.find(".sp-track-control").on("click",k);A.find(".sp-remove-button").on("click",q);v();};var k=function(y){y.preventDefault();e.settings.play_from_list=false;
var z=a(this).parents('tr[class*="sp-track"]');if(z.hasClass("playing")||z.hasClass("paused")){_play();return false;}_destruct_sound();e.settings.track=z;
_play();return false;};var q=function(y){y.preventDefault();var A=a(this).parents('tr[class*="sp-track"]'),E=a(this).parents('tr[class*="sp-track"]').index(),C=null,F=false;
if(A.hasClass("playing")){F=true;}if(e.settings.sound){C=e.settings.sound.url;}if(e.settings.tracklist_length==0){_destruct_sound();e.settings.track=null;
e.settings.tracklist_length=null;r(0);if(typeof(Storage)!=="undefined"){var D=a("#sp-queue-scroll tbody").html();sessionStorage.setItem("scamp_player_list",D);
if(e.settings.tracklist_length==null){sessionStorage.removeItem("scamp_player_list");}}return;}if(C==A.find(".sp-track-control ").attr("href")){var z=E,G=z+1,B=null;
if(G>e.settings.tracklist_length){G=0;}B=a("#sp-queue-scroll tbody tr:eq("+G+")");if(F){_destruct_sound();e.settings.track=B;_play();}else{_destruct_sound();
}}r(E);e.settings.tracklist_length=a("#sp-queue-scroll tbody .sp-track").length-1;if(typeof(Storage)!=="undefined"){var D=a("#sp-queue-scroll tbody").html();
sessionStorage.setItem("scamp_player_list",D);if(e.settings.tracklist_length==null){sessionStorage.removeItem("scamp_player_list");}}};var r=function(y){if(a("#sp-scroller tr").length>0){e.settings.tracklist.find("tbody tr:eq("+y+")").remove();
}return false;};var m=function(){a(".sp-volume-slider").on("touchstart mousedown",function(F){if(_has_touch()===true&&e.settings.is_mouse==false){var z=true;
}else{var z=false;}if(e.settings.tracklist_length==null){return;}var C=a(this),y=C.find(".sp-volume-position"),E=C.offset().left,B=C.width(),D=e.settings.sound,A=null;
a(document).on("touchmove mousemove",function(I){var H=z?I.originalEvent.changedTouches[0]:I;var G=Math.max(0,Math.min(H.clientX-E,B));A=Math.floor(G/B*100);
y.width(G);if(D){D.setVolume(A);}_set_vol_class(A);return false;}).on("touchend mouseup",function(G){e.settings.volume=A;a(this).off("touchmove mousemove");
a(this).off("touchend mouseup");return false;}).trigger({type:"touchmove mousemove",clientX:F.clientX});return false;});a(".sp-progress").on("touchstart mousedown",function(E){if(_has_touch()===true&&e.settings.is_mouse==false){var z=true;
}else{var z=false;}if(e.settings.tracklist_length==null){return;}var A=a(this).addClass("searching"),y=A.find(".sp-postion"),D=A.offset().left,B=A.width(),C=e.settings.sound;
e.settings.searching=true;if(z==false){if(C){xPos=Math.max(0,Math.min(E.pageX-D,B));y.width(xPos);C.setPosition(xPos/B*C.durationEstimate);}}C.pause();
a(document).on("touchmove mousemove",function(H){var G=z?H.originalEvent.changedTouches[0]:H;var F=Math.max(0,Math.min(G.clientX-D,B));y.width(F);if(C){C.setPosition(F/B*C.durationEstimate);
}return false;}).on("touchend mouseup",function(F){e.settings.searching=false;A.removeClass("searching");if(e.el.hasClass("playing")&&C){C.resume();}a(this).off("touchmove mousemove");
a(this).off("touchend mouseup");return false;}).trigger({type:"touchmove mousemove",clientX:E.clientX});return false;});};_set_vol_class=function(y){if(y==0){a(".sp-volume-button").removeClass("sp-vol-medium sp-vol-max").addClass("sp-vol-off");
}else{if(y<=50){a(".sp-volume-button").removeClass("sp-vol-max sp-vol-off").addClass("sp-vol-medium");}else{if(y>75){a(".sp-volume-button").removeClass("sp-vol-medium sp-vol-off").addClass("sp-vol-max");
}}}};_format_time=function(z){var B=Math.floor(z/1000),y=Math.floor(B/60),A=B-y*60;return y+":"+(A<10?"0"+A:A);};_pretty_link=function(E){var J="",G="",y=E.attr("href"),K=E.data("cover"),B=E.data("artist"),I=E.data("artist_url"),H=E.data("artist_target"),F=E.data("release_url"),D=E.data("release_target"),A=E.data("shop_url"),C=E.data("shop_target"),z=E.data("free_download");
if(e.settings.link_filter!=undefined&&e.settings.link_filter!=""){if(a(E).find(e.settings.link_filter).length){G=a(E).find(e.settings.link_filter).text();
}}if(K==undefined||K==""){K="";}else{K='data-cover="'+K+'"';}if(B==undefined||B==""){B="";}else{B='data-artist="'+B+'"';}if(I==undefined||I==""){I="";}else{I='data-artist_url="'+I+'"';
}if(H==undefined||H==""){H="";}else{H='data-artist_target="'+H+'"';}if(F==undefined||F==""){F="";}else{F='data-release_url="'+F+'"';}if(D==undefined||D==""){D="";
}else{D='data-release_target="'+D+'"';}if(A==undefined||A==""){A="";}else{A='data-shop_url="'+A+'"';}if(C==undefined||C==""){C="";}else{C='data-shop_target="'+C+'"';
}if(z==undefined||z==""){z="no";}else{z='data-free_download="'+z+'"';}J='<a href="'+y+'" '+K+" "+B+" "+I+" "+H+" "+F+" "+D+" "+A+" "+C+" "+z+">"+G+"</a>";
J=a(J);return J;};_add_track=function(A){if("#"==a(this).attr("href")||""==a(this).attr("href")){return false;}if(e.settings.obj.status=="working"){return false;
}var y=_pretty_link(a(this)),z=[y];e.settings.obj={status:"working",action:"add_track",tracks:z,tracks_size:1,track_nr:-1};v();A.preventDefault();A.stopPropagation();
A.stopImmediatePropagation();return false;};_play_track=function(C){if("#"==a(this).attr("href")||""==a(this).attr("href")){return false;}if(e.settings.obj.status=="working"){return false;
}if(a(this).parents(".sp-list")){var E=a(this).parents(".sp-list");if(E.attr("id")){if(!_check_tracks(E.attr("id"))){var A,B=a(this).parents(".sp-track-item");
a(".sp-track-item",E).each(function(F){if(B.is(a(this))){A=F;return false;}});_remove_tracks(E.attr("id"));_create_tracks(E.attr("id"),"play_tracks",A);
return false;}e.settings.play_from_list=true;}}var y=_pretty_link(a(this)),z=[y];if(e.settings.mobile){var D="add_track";}else{var D="play_track";}e.settings.obj={status:"working",action:"play_track",tracks:z,tracks_size:1,track_nr:-1};
v();C.preventDefault();C.stopPropagation();C.stopImmediatePropagation();return false;};_add_tracks=function(y){var z=a(this).data("id");if(z==undefined||z==""||a("#"+z).length<=0){return false;
}if(e.settings.obj.status=="working"){return false;}if(!_check_tracks(z)){_remove_tracks(z);}_create_tracks(z,"add_tracks",0);y.preventDefault();y.stopPropagation();
y.stopImmediatePropagation();return false;};_play_tracks=function(y){var z=a(this).data("id");if(z==undefined||z==""||a("#"+z).length<=0){return false;
}if(e.settings.obj.status=="working"){return false;}if(!_check_tracks(z)){_remove_tracks(z);}_create_tracks(z,"play_tracks");y.preventDefault();y.stopPropagation();
y.stopImmediatePropagation();return false;};_create_tracks=function(E,C,z){var B=a("#"+E),y=new Array(),A=a("a.sp-add-track, a.sp-play-track",B).length;
a("a.sp-add-track, a.sp-play-track",B).each(function(F){y.push(_pretty_link(a(this)));});if(e.settings.mobile&&C=="play_tracks"){var D="add_tracks";}else{var D="play_tracks";
}e.settings.obj={status:"working",action:C,list_id:E,init_track:z,tracks:y,tracks_size:A,track_nr:-1};v();};_debug=function(y){if(e.settings.debug){a("#scamp-console").append(y+"<br>");
}};var p=function(y){a(y).on("touchstart mousedown",function(F){if(_has_touch()===true&&e.settings.is_mouse==false){var A=true;}else{var A=false;}if(e.settings.tracklist_length==null){return;
}var B=a(this).addClass("searching"),z=B.find(".sp-content-postion"),E=B.offset().left,C=B.width(),D=e.settings.sound;e.settings.searching=true;D.pause();
if(A==false){if(D){xPos=Math.max(0,Math.min(F.pageX-E,C));z.width(xPos);D.setPosition(xPos/C*D.durationEstimate);}}a(document).on("touchmove mousemove",function(I){var H=A?I.originalEvent.changedTouches[0]:I;
var G=Math.max(0,Math.min(H.clientX-E,C));z.width(G);if(D){D.setPosition(G/C*D.durationEstimate);}return false;}).on("touchend mouseup",function(G){e.settings.searching=false;
B.removeClass("searching");if(e.el.hasClass("playing")&&D){D.resume();}a(this).off("touchmove mousemove");a(this).off("touchend mouseup");return false;
}).trigger({type:"touchmove mousemove",clientX:F.clientX});return false;});};e.update_analyser=function(){n("update");};e.update_events=function(y){a(y).off("click",".sp-add-track",_add_track);
a(y).off("click",".sp-play-track",_play_track);a(y).off("click",".sp-add-list",_add_tracks);a(y).off("click",".sp-play-list",_play_tracks);p(a(".sp-content-control"));
a(y).on("click",".sp-add-track",_add_track);a(y).on("click",".sp-play-track",_play_track);a(y).on("click",".sp-add-list",_add_tracks);a(y).on("click",".sp-play-list",_play_tracks);
};e.update_content=function(){var A=e.settings.track,y=null,z=null;if(A==null){return;}a("a.sp-play-track").removeClass("sp-play sp-pause sp-stop sp-loading");
a(".sp-content-control.sp-is-active").removeClass("sp-is-active");if(A.hasClass("sc-list")){y=A.data("sc_list");}else{if(A.hasClass("sc-track")){y=A.data("sc");
}else{y=A.find(".sp-track-control").attr("href");}}a('a.sp-play-track[href="'+y+'"]').each(function(){var D=a(this);if(D.length>0){if(typeof D.data("control")!=="undefined"&&e.settings.status!=null){var F=D.data("control");
F=a("#"+F);if(F.length){F.addClass("sp-is-active");var B=a("#scamp_player .sp-position").width(),C=a("#scamp_player .sp-position").offsetParent().width(),E=100*B/C;
F.find(".sp-content-position").css("width",E+"%");}}switch(e.settings.status){case"loading":D.addClass("sp-loading");break;case"play":D.addClass("sp-play");
break;case"pause":D.addClass("sp-pause");break;case"error":D.addClass("sp-error");break;case"stop":D.addClass("sp-stop");a(".sp-content-control.sp-is-active").removeClass("sp-is-active");
break;}}});};e.addTrack=function(y,A){if(e.settings.obj.status=="working"){return false;}if(typeof y=="undefined"){return false;}var y=a('<a href="'+y.url+'" data-cover="'+y.cover+'" data-artist="'+y.artist+'" data-artist_url="'+y.artist_url+'" data-artist_target="'+y.artist_target+'" data-release_url="'+y.release_url+'" data-release_target="'+y.release_target+'" data-shop_url="'+y.shop_url+'" data-shop_target="'+y.shop_target+'" data-free_download="'+z[i].free_download+'">'+y.title+"</a>"),z=[y];
e.settings.obj={status:"working",action:A,tracks:z,tracks_size:1,track_nr:-1};v();return false;};e.addTracks=function(B,E){if(e.settings.obj.status=="working"){return false;
}if(typeof B=="undefined"||B.length==0){return false;}var y=new Array(),D=B.length;for(var C=0,A=D;C<A;C++){var z=a('<a href="'+B[C].url+'" data-cover="'+B[C].cover+'" data-artist="'+B[C].artist+'" data-artist_url="'+B[C].artist_url+'" data-artist_target="'+B[C].artist_target+'" data-release_url="'+B[C].release_url+'" data-release_target="'+B[C].release_target+'" data-shop_url="'+B[C].shop_url+'" data-shop_target="'+B[C].shop_target+'"  data-free_download="'+B[C].free_download+'">'+B[C].title+"</a>");
y.push(z);}e.settings.obj={status:"working",action:E,tracks:y,tracks_size:D,track_nr:-1};v();};e.playerAction=function(y){if(e.settings.obj.status=="working"){return false;
}if(y=="play"){_play();}else{if(y=="pause"){_pause();}else{if(y=="stop"){l();}else{if(y=="next"){g();}else{if(y=="prev"){f();}}}}}};s();};})(jQuery);